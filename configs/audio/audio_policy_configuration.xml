<?xml version='1.0' encoding='utf-8'?>
<audioPolicyConfiguration xmlns:ns0="http://www.w3.org/2001/XInclude" version="7.0">
    
    <globalConfiguration speaker_drc_enabled="false" call_screen_mode_supported="true" />

    <modules>
        <module name="primary" halVersion="3.0">
            <attachedDevices>
                <item>Speaker</item>
                <item>Earpiece</item>
                <item>Built-In Mic</item>
                <item>Built-In Back Mic</item>
                <item>FM Tuner In</item>
                <item>Voice Call In</item>
                <item>Echo Ref In</item>
                <item>Telephony Tx</item>
            </attachedDevices>
            <defaultOutputDevice>Speaker</defaultOutputDevice>
            <mixPorts>
                <mixPort name="primary output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
                    <defaultOutputDeviceEffects><effect name="v4a_standard_re" /><effect name="dax_effect_alt" /></defaultOutputDeviceEffects><profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </mixPort>
                <mixPort name="deep_buffer" role="source" flags="AUDIO_OUTPUT_FLAG_DEEP_BUFFER">
                    <defaultOutputDeviceEffects><effect name="v4a_standard_re" /><effect name="dax_effect_alt" /></defaultOutputDeviceEffects><profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </mixPort>
                <mixPort name="fast" role="source" flags="AUDIO_OUTPUT_FLAG_FAST">
                    <defaultOutputDeviceEffects><effect name="v4a_standard_re" /><effect name="dax_effect_alt" /></defaultOutputDeviceEffects><profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </mixPort>
                <mixPort name="voip_rx" role="source" flags="AUDIO_OUTPUT_FLAG_VOIP_RX">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="16000 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="16000 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </mixPort>
                <mixPort name="mmap_no_irq_out" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT AUDIO_OUTPUT_FLAG_MMAP_NOIRQ">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </mixPort>
                <mixPort name="incall_music_uplink" role="source" flags="AUDIO_OUTPUT_FLAG_INCALL_MUSIC">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </mixPort>
                <mixPort name="primary input" role="sink" maxOpenCount="1" maxActiveCount="1">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </mixPort>
                <mixPort name="mmap_no_irq_in" role="sink" flags="AUDIO_INPUT_FLAG_MMAP_NOIRQ">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </mixPort>
                <mixPort name="voice tx" role="sink" maxOpenCount="1" maxActiveCount="1">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </mixPort>
                <mixPort name="FM Tuner input" role="sink" maxOpenCount="1" maxActiveCount="1">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </mixPort>
                <mixPort name="voip_tx" role="sink" flags="AUDIO_INPUT_FLAG_VOIP_TX" maxOpenCount="1" maxActiveCount="1">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </mixPort>
                <mixPort name="fast input" role="sink" flags="AUDIO_INPUT_FLAG_FAST" maxOpenCount="1" maxActiveCount="1">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </mixPort>
                <mixPort name="hifi_playback" role="source" />
                <mixPort name="hifi_input" role="sink" />
            </mixPorts>
            <devicePorts>
                
                <devicePort tagName="Earpiece" type="AUDIO_DEVICE_OUT_EARPIECE" role="sink">
                   <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_MONO" />
                   <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_MONO" />
                </devicePort>
                <devicePort tagName="Speaker" role="sink" type="AUDIO_DEVICE_OUT_SPEAKER">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="Wired Headset" type="AUDIO_DEVICE_OUT_WIRED_HEADSET" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="Wired Headphones" type="AUDIO_DEVICE_OUT_WIRED_HEADPHONE" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="AUX Digital Out" type="AUDIO_DEVICE_OUT_AUX_DIGITAL" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="BT SCO" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="BT SCO Headset" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO_HEADSET" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="BT SCO Car Kit" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO_CARKIT" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="Analog Dock Headset" type="AUDIO_DEVICE_OUT_ANLG_DOCK_HEADSET" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="Digital Dock Headset" type="AUDIO_DEVICE_OUT_DGTL_DOCK_HEADSET" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="FM Tuner Out" type="AUDIO_DEVICE_OUT_FM" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="Telephony Tx" type="AUDIO_DEVICE_OUT_TELEPHONY_TX" role="sink">
                    <profile name="" format="AUDIO_FORMAT_PCM_32_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100 48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO" />
                </devicePort>
                <devicePort tagName="USB Device Out" type="AUDIO_DEVICE_OUT_USB_DEVICE" role="sink">
                </devicePort>
                <devicePort tagName="USB Headset Out" type="AUDIO_DEVICE_OUT_USB_HEADSET" role="sink">
                </devicePort>
                <devicePort tagName="Built-In Mic" type="AUDIO_DEVICE_IN_BUILTIN_MIC" role="source">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </devicePort>
                <devicePort tagName="Built-In Back Mic" type="AUDIO_DEVICE_IN_BACK_MIC" role="source">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </devicePort>
                <devicePort tagName="Wired Headset Mic" type="AUDIO_DEVICE_IN_WIRED_HEADSET" role="source">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </devicePort>
                <devicePort tagName="BT SCO Headset Mic" type="AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET" role="source">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000" channelMasks="AUDIO_CHANNEL_IN_MONO" />
                </devicePort>
                <devicePort tagName="AUX Digital In" type="AUDIO_DEVICE_IN_AUX_DIGITAL" role="source">
                    <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </devicePort>
                <devicePort tagName="FM Tuner In" type="AUDIO_DEVICE_IN_FM_TUNER" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </devicePort>
                <devicePort tagName="Echo Ref In" type="AUDIO_DEVICE_IN_ECHO_REFERENCE" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                </devicePort>
                <devicePort tagName="USB Device In" type="AUDIO_DEVICE_IN_USB_DEVICE" role="source">
                </devicePort>
                <devicePort tagName="USB Headset In" type="AUDIO_DEVICE_IN_USB_HEADSET" role="source">
                </devicePort>
                <devicePort tagName="Voice Call In" type="AUDIO_DEVICE_IN_VOICE_CALL" role="source">
                     <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000 16000 32000 44100 48000" channelMasks="AUDIO_CHANNEL_IN_MONO AUDIO_CHANNEL_IN_STEREO" />
                     <gains>
                        <gain name="gain_1" mode="AUDIO_GAIN_MODE_JOINT" minValueMB="-8400" maxValueMB="4000" defaultValueMB="0" stepValueMB="100" />
                    </gains>
                </devicePort>
            </devicePorts>
            
            <routes>
                <route type="mix" sink="Earpiece" sources="primary output,deep_buffer,fast,mmap_no_irq_out,voip_rx,Voice Call In" />
                <route type="mix" sink="Speaker" sources="primary output,deep_buffer,fast,mmap_no_irq_out,FM Tuner In,voip_rx,Voice Call In" />
                <route type="mix" sink="Wired Headset" sources="primary output,deep_buffer,fast,mmap_no_irq_out,FM Tuner In,voip_rx,Voice Call In" />
                <route type="mix" sink="Wired Headphones" sources="primary output,deep_buffer,fast,mmap_no_irq_out,FM Tuner In,voip_rx,Voice Call In" />
                <route type="mix" sink="AUX Digital Out" sources="primary output" />
                <route type="mix" sink="USB Device Out" sources="primary output,deep_buffer,fast,FM Tuner In,voip_rx,Voice Call In,hifi_playback" />
                <route type="mix" sink="USB Headset Out" sources="primary output,deep_buffer,fast,FM Tuner In,voip_rx,Voice Call In,hifi_playback" />
                <route type="mix" sink="BT SCO" sources="primary output,deep_buffer,fast,voip_rx,Voice Call In" />
                <route type="mix" sink="BT SCO Headset" sources="primary output,deep_buffer,fast,voip_rx,Voice Call In" />
                <route type="mix" sink="BT SCO Car Kit" sources="primary output,deep_buffer,fast,voip_rx,Voice Call In" />
                <route type="mix" sink="Analog Dock Headset" sources="primary output" />
                <route type="mix" sink="Digital Dock Headset" sources="primary output" />
                <route type="mix" sink="FM Tuner Out" sources="primary output" />
               <route type="mix" sink="Telephony Tx" sources="Built-In Mic,Built-In Back Mic,Wired Headset Mic,BT SCO Headset Mic,USB Device In,USB Headset In,incall_music_uplink" />
                <route type="mix" sink="primary input" sources="Built-In Mic,Built-In Back Mic,Wired Headset Mic,BT SCO Headset Mic,AUX Digital In,USB Device In,USB Headset In" />
                <route type="mix" sink="mmap_no_irq_in" sources="Built-In Mic,Built-In Back Mic,Wired Headset Mic" />
                <route type="mix" sink="voice tx" sources="Voice Call In" />
                <route type="mix" sink="FM Tuner input" sources="FM Tuner In,Echo Ref In" />
                <route type="mix" sink="hifi_input" sources="USB Device In,USB Headset In" />
                <route type="mix" sink="voip_tx" sources="Built-In Mic,Built-In Back Mic,Wired Headset Mic,BT SCO Headset Mic,AUX Digital In,USB Device In,USB Headset In" />
                <route type="mix" sink="fast input" sources="Built-In Mic,Built-In Back Mic,Wired Headset Mic,BT SCO Headset Mic,AUX Digital In,USB Device In,USB Headset In" />
            </routes>
        </module>
        <ns0:include href="bluetooth_audio_policy_configuration.xml" />
        <ns0:include href="a2dp_in_audio_policy_configuration.xml" />
        <ns0:include href="usb_audio_accessory_only_policy_configuration.xml" />
        <ns0:include href="r_submix_audio_policy_configuration.xml" />
    </modules>
    <ns0:include href="audio_policy_volumes.xml" />
    <ns0:include href="default_volume_tables.xml" />
</audioPolicyConfiguration>
